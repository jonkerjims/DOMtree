<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="/static/NewYearStatic/css/demo.css"/>
     <meta name="viewport"
          content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=0">
    <title>成功生成链接</title>
</head>
<body>
    <div style="width: 100%;height: 100%">
        <div style="width: 350px;margin: auto;margin-top: 200px;text-align: center">
            <h3>
                <span>功能实现了，样式就不写了。</span>
                <br>
                <br>
                <br>
                <br>
                <span>祝你玩的开行，元旦快乐！</span>
                <br>
                <br>
                <br>
                <br>
                <span><a href="../../tree/share" style="color: #00FF00">圣诞树🎄</a>的友情链接</span>
                <br>
                <br>
                <br>
                <br>
                <span id="href" style="display: none;word-wrap:break-word;"></span>
                <br>
                <br>
                <br>
                <br>
                <button id="copy">点击复制</button>
                <button id="show" style="margin-left: 20px">点击预览</button>
            </h3>
        </div>
    </div>
    <script src="/static/js/jquery.js"></script>
    <script src="/static/js/ClipBoard.js"></script>
    <script>
        $(function (){
            var href = window.location.href.split('share/')[0]
            var newhref = href + 'index/' + {{ ID }}

            $('#href').html(newhref)
            $("#href").fadeIn("slow");

            $('#show').click(function (){
                window.location.href = newhref;
            })

             $('#copy').click(function (){
                var txt = newhref
                var msg = '{{ addressee }}，新的一年，祝你新年快乐！元气满满！' + txt + '\n--------\n送你一个小小盲盒，快拆开看看吧~'
                var clipboard = new ClipboardJS('#copy', {
           　　　　 text: function() {
           　　　　    return msg;
          　　　　  }
        　　　　  });
                clipboard.on('success',function (e){
                    alert('复制成功',e)
                    clipboard.destroy();
                });
                clipboard.on('error',function (e){
                    $("#href").fadeIn("slow");
                    alert('复制失败',e)
                    clipboard.destroy();
                });

            })
        })




    </script>
</body>
</html>